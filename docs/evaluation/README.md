# XPathGenie 実証実験データ

## 目的

XPathGenieの有効性を定量的に評価するための実証実験データ。

### なぜやるのか

XPathGenieは「AIが1回だけXPathマッピングを生成し、以降はDOMだけで抽出する」というアプローチを取る。
このアプローチが実際の多様なWebサイトに対してどの程度通用するかを検証する必要がある。

具体的には：

1. **構造パターンの網羅性** — dt/dd, th/td, div-based, 混在型など、実在するサイト構造のバリエーションに対してGenieが正しくマッピングを生成できるか
2. **精度の定量評価** — Aladdinで複数ページ（10件）を検証し、フィールドごとのヒット率を測定。論文（whitepaper）の評価セクションに使う
3. **SPA率の把握** — curlで取れるSSRサイトとPlaywright必須のSPAサイトの比率。teddy_crawlerのエンジン選択戦略に直結する
4. **プロンプト改善の素材** — 失敗パターン（取れない構造、誤マッピング）を分析し、Genieのプロンプトを改善するフィードバックループ

### 学術的背景

FIT 2026への投稿を視野に入れた評価。20サイト以上での定量評価が求められる。
対象は医療・介護・薬剤師の求人サイト35件（日本語サイト、同一ドメイン内で構造が統一されている前提）。

## ファイル構成

| ファイル | 内容 |
|---------|------|
| `target_sites.md` | 評価対象35サイトのURL一覧 |
| `info.txt` | 各サイトの構造分析データ（レンダリング方式、タグ構造、ID取得パターン、統計サマリー） |
| `url_lists.txt` | 各サイトの詳細ページURL 10件（Genie/Aladdinにそのまま投入可能） |
| `site_analysis_prompt.md` | サイト分析のサブエージェント用プロンプト（再現可能な手順書） |

## 実験フロー

```
1. サイト構造分析（本ディレクトリのデータ）
   curl + lxml で一覧/詳細の構造を把握
   ↓
2. Genie分析（各サイト1回）
   詳細ページURL 1件 → AI がXPathマッピング生成
   ↓
3. Aladdin検証（各サイト10件）
   url_lists.txt の10件で cross-page ヒット率を測定
   ↓
4. 結果記録 → 論文評価セクション
   フィールド数、ヒット率、所要時間、失敗パターン
```

## 対象サイト概要（35件）

- **薬剤師**: 18サイト (#2-#8, #10-#13, #15-#16, #29-#32)
- **介護**: 9サイト (#1, #14, #17-#20, #24, #28, #35)
- **看護**: 5サイト (#19, #21-#22, #26, #35)
- **医療全般**: 3サイト (#9, #25, #27)
- **製薬**: 1サイト (#23)

### レンダリング方式（分析済み）
- **SSR 63%** (22サイト) — curl取得可、Genie直接対応
- **SPA 20%** (7サイト) — Playwright必須
- **アクセス不可 11%** (4サイト) — 403/500/ログイン必須
- **要確認 6%** (2サイト)

### 詳細ページ構造
- **th/td テーブル 31%** — 最多
- **dt/dd 定義リスト 23%**
- **混在 19%**
- **その他（SPA/不明）27%**
